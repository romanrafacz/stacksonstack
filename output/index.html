<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	    <meta charset="utf-8" />
	    <title>stacks</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	    <meta name="description" content="" />
	    <meta name="author" content="" />
	    <meta name="keywords" content="" />
	    <meta name="generator" content="stacks" />
	
	    <!-- Le styles -->
	    <link rel="stylesheet" href="css/bootstrap.min.css" />
	    <link rel="stylesheet" href="css/asciidoctor.css" />
	    <link rel="stylesheet" href="css/base.css" />
	    <link rel="stylesheet" href="css/prettify.css" />
	
	    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	    <!--[if lt IE 9]>
	      <script src="js/html5shiv.min.js"></script>
	    <![endif]-->
	
	    <!-- Fav and touch icons -->
	    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png"/>-->
	    <link rel="shortcut icon" href="favicon.ico" />
	    
	</head>
	<body onload="prettyPrint()">
	<div id="wrap">
		
		<div>
	
	  <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" shape="rect" href="index.html">Stacks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
           <!-- <li><a th:with="rootpath=(${content.rootpath != null} ? ${content.rootpath} : '')" th:href="${rootpath}+'index.html'">Home</a></li> -->
            <li><a shape="rect" href="tags/java.html">Java</a></li>
            <li><a shape="rect" href="tags/python.html">Python</a></li>
            <li><a shape="rect" href="tags/devops.html">DevOps</a></li>
            <li><a shape="rect" href="tags/postgres.html">Postgres</a></li>
            <li><a shape="rect" href="about.html">About</a></li>
           <!-- <li><a th:with="rootpath=(${content.rootpath != null} ? ${content.rootpath} : '')" th:href="${rootpath}+${config.feed_file}">Subscribe</a></li> -->
          
            
          </ul>
            <a shape="rect" href="https://github.com/romedawg/stacksonstack">
			<img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1001;" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" />
			</a>
        </div><!--/.nav-collapse -->
      </div>
    </div>

	</div>
		<div class="container">
			<div class="row">
				
				<div class="page-header">
				<h2>Roman's Weblog</h2>
				</div>
			
				
				<div class="col-md-9">
			
				<div>
					<a href="blog/2016/vim_plugins.html" shape="rect"><h1>Pluginto Vim</h1></a>
					<p>12 January 2016</p>
					<p>
<p>Awesome Vim plugins that will make your life easier</p>


<p>
With so many tools out there it's hard to keep track of all of them, here are a few that you should keep up your sleeve
</p>

<li><a href="https://github.com/tpope/vim-pathogen">vim-pathogen</a></li>

<p>
Most of these are provided by tpope via github who is a unicorn.  Pathogen makes installing plugins a breeze.  Once you add pathogen into your your vimrc, you're able to quickly add other plugins into your enviroment by dropping them in the the bundle folder in .vim.
</p>

<li><a href="https://github.com/tpope/vim-sensible.git">vim-sensible</a></li>

<p>
Vim-Sensible is a good starting point to your .vimrc, especially if you're new to vim.  Ultimately you'll want to roll your own so you know exactly what you'll get but if you ain't got no time for that, start here.
</p>


<li><a href="https://github.com/christoomey/vim-tmux-navigator.git">vim-tmux-navigator</a></li>

<p>
If you're using multiple split screens with vim, tmux allows you to navigate a bit better. 
</p>

<li><a href="https://github.com/cwoac/nvim.git">https://github.com/cwoac/nvim.git</a></li>

<p>nvim</p>

<li><a href="https://github.com/ctrlpvim/ctrlp.vim.git">ctrlp</a></li>
<p><i>ctrlp</i>Full path fuzzy file, buffer, mru, tag, ... finder for Vim.  Makes navigating throught files and directories a breeze
.  Well documented, easy to use. </p>

Netfiler
</p>
				</div>
			
				<div>
					<a href="blog/2014/python.html" shape="rect"><h1>Awesome Python Libraries</h1></a>
					<p>25 October 2015</p>
					<p>
My top 10 python libraries

Some usefull libraried that have been helpfull

falcon

ipython

requets

wget

</p>
				</div>
			
				<div>
					<a href="blog/2014/postgres_start.html" shape="rect"><h1>Postgres starter kit</h1></a>
					<p>26 September 2015</p>
					<p>

<p>Getting postgres up and running.</p>

* http://example.org
* http://example.org[Example.org]

Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu, 
mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo 
ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet 
ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus, 
id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales. In 
consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere 
libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.
</p>
				</div>
			
				<div>
					<a href="blog/2014/springboot.html" shape="rect"><h1>Springboot</h1></a>
					<p>02 August 2015</p>
					<p><p>Springboot is a great tool if you're looking to delelop quickly and efficiently.  It does all the heavy lifting of wiring all your beans and configuration together so you can just focus on coding</p>

<p>Setup a basic project with springboot. We'll work in eclipse and a maven build.  
The easiest way is the head over to <a href="http://start.spring.io/">http://start.spring.io</a> .  Spring initializer will allow us to 
create a basic project that we can import into eclipse.  
Make sure to select the latest java version along with the build type, for this example we'll use Maven.  
Also, select the necessary packages, in this case add the following dependencies Web , Thymeleaf, JPA, & Postgres</p>

<!-- <imgÂ th:with="rootpath=(${content.rootpath != null} ? ${content.rootpath} : '')" th:src="@{${rootpath}+'images/spring_initializer_img.png}" /> -->
<img ="images/spring_initializer_img.png" />

<p>Once you download, add the folder into your IDE.  You will notice a basic file structure.  We're going to add a few things to get this site up and 
running.  A controller to handle the incoming requests.  A domain object for our entity(think table).  A domain access object and then of course our views.  This is where Thymeleaf comes in, I like it as a templating enigne. Lastly, we need to modify our application.properties, which is how the persistance layer gets applied.
</p>

<p>Here is our Application context, you wont need to modify this.  Later, you can add other object such as a Servlet object.</p>

<pre class="prettyprint">
<code>
package com.users;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SuperusersApplication {

  public static void main(String[] args) {
      SpringApplication.run(SuperusersApplication.class, args);
	}
}
</code>
</pre>

<p>Note @SpringBootApplication, this combines 3 annotations you would use in Spring MVC - @Configuration, @ComponentScan, @EnableSpring - confirm this</p>

<p>Now lets configure the Controller</p>

<pre class="prettyprint">
<code>

package com.users.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {

  @RequestMapping("/")
  public String home(){
    return "home";
  }
}
</code>
</pre>

<p>
This will route to our landing page, let's create another controller that will route to our user data.
</p>

<pre class="prettyprint">
<code>
package com.users.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.portlet.ModelAndView;

import com.users.repository.UserRepository;

@Controller
public class UserController {
  
    @Autowired
    private UserRepository userRepository;

    @RequestMapping("/users")
    public ModelAndView getUsers(){
      return new ModelAndView("users", "users", userRepository.findAll());
    }
}
</code>
</pre>

<p>Create a <i>User.java</i> class in package called com.users.domain.  Once we have our domain model, we will need to add a service object that will fetch our data.  Loose coupling and modularity is the goal here.
	
</p>

<pre class="prettyprint">
<code>
package com.users.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="user")
public class User {
  
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private Integer id;
	    
    @Column(name="username")
    private String username;
	      
    @Column(name="email")
    private String email;
		    
    @Column(name="password")
    private String password;
			      
    //Getters and Setters here
}
				
</code>
</pre>

<p>With our domain model in place, we need to create a repository object that will fetch all the datat for us.  Create a class <b>UserRepository.java</b> in the com.users.repository package.</p>

<pre class="prettyprint">
<code>
package com.users.repository;

import org.springframework.data.jpa.repository.JpaRepository;

import com.users.domain.User;

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {

}

</code>	
</pre>

<p>
Next, lets tie in our database.  Under resources, there is an application.properties file that we need to modify.  Here we can add our database details.  
Eventually, you will want to place file on your system vs hardcoding these variables but we can add it for now.  
<a href="http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">Here</a> you will find common application properties you can add.
</p>

<pre class="prettyprint">
<code>
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://192.168.100.1:5432/spring
spring.datasource.username=roman
spring.datasource.password=snickers
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
</code>
</pre>

<p>Almost done, we need to add our frontend html files.  We're using thymeleaf as our templating engine and we'll use bootstrap
to do all of the heavy lifting on the front end.  Under resources files add a <b>home.html</b> file(remember our home controller), also add
a <b>user.html</b> file.
</p>

<pre class="prettyprint">
<code>
	
</code>
</pre>

<p>You'll notice I've uses webjars to reference bootstart(as well as angular and jqeury).
WebJars allow you to manage frontend assets and include them in your project as Java Archive (JAR) Maven dependencies.
This is what I have added to my maven pom.xml file.
</p>
<pre class="prettyprint">
<code>
			&lt;groupId&gt;org.webjars&lt;/groupId&gt;
			&lt;artifactId&gt;bootstrap&lt;/artifactId&gt;
			&lt;version&gt;3.3.1&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.webjars&lt;/groupId&gt;
			&lt;artifactId&gt;angularjs&lt;/artifactId&gt;
			&lt;version&gt;1.3.8&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.webjars&lt;/groupId&gt;
			&lt;artifactId&gt;jquery&lt;/artifactId&gt;
			&lt;version&gt;1.11.1&lt;/version&gt;
		&lt;/dependency&gt;
</code>
</pre>
</p>
				</div>
			
				<div>
					<a href="blog/2015/saltstack_up_and_running.html" shape="rect"><h1>Saltstack: Up and Running pt1</h1></a>
					<p>02 April 2015</p>
					<p>
<p>
Th goal of this post is to have a working example of saltstack, a mighty fine configuration management tool written in python.</p>
<p>
We're going to setup a master server and a slave(minion) which we will be able to push all our states to.  <i>State</i> with the extention .sls is how
we are able to define what we went to exactly went want to happen to our minion.  We will define a user state that will define user profiles
across 1 server or 1000.
</p>
<p>
Saltstack also provides us with a really neat remote ssh execution tool which makes pushing out code to remote minions as.  I.E, you can just update 1 package
to a host of machines with one command.  We'll also commit our states to a Git repo so we can continue building out our states.
</p>

<p>
First thing you want to do is make sure you have salt-master installed on one of your system.  This is as easy as using the package manager on your
flavor of *nix.  Windows servers are not support as salt masters at the time of this wrting.

I will be using CentOS for this writeup.  I am also using two vagrant machines to make the process easier, you can checkout devops section if you're unsure.
</p>

<pre class="prettyprint">
<code>
sudo yum install salt-master -y
</code>
</pre>

<p>Once salt-maste is install, we'll just quick setup some quick configurations.</br>
<li>Change the hostname to saltmaster</li>
<li>Create salt & pillar directory in /srv - <i>sudo mkdir -p /srv/{salt,pillar}</i></li>
</p>
<p>You dont have to change anything in the master configuration file unless you want to change the default location for your states.  Which I typically do 
You can find a complete breakdown: <a href="https://docs.saltstack.com/en/latest/ref/configuration/master.html"><i>Here</i></a>
</p>

<pre class="prettyprint">
<code>
file_roots
  base:
    - /srv/salt/
    - /srv/salt/pillars
  dev:
    - /srv/salt/dev/services
    - /srv/salt/dev/states
  prod:
    - /srv/salt/prod/services
    - /srv/salt/prod/states
</code>
</pre>
<p>I should mention that saltstack to uses yaml searializtion for it's configuration, make sure to stick to this format</p>

<p>
<h2>Modify the Salt Minion</h2>
<p>Let's modify the salt minion and connect it to the salt master.</br>
<li>Rename the minions hostname(we'll use salt_minion)</li>
<li>Install saltstack</li>
<li>Edit /etc/salt/minion</li>
</p>
<pre class="prettyprint">
<code>sudo yum install salt-minion -y</code>
</pre>
	
<li>Edit /etc/salt/minion</li>
<pre class="prettyprint">
<code>master: saltmaster or ip_address_of_master</code>
</pre>
<p>You could just put the ip_address_of_master or the hostname and edit the /etc/hosts file and hardcode the hostanme to the ipaddress.</p>
<p>Restart the minion, jump over to your saltmaster, let's see if any minions tried to sync to our master
</p>
<pre class="prettyprint">
<code>
sudo salt-key -L
</code>
</pre>
<p>Once you add the masters host ip and restart the minion, it will automatically try to connect to the master.  You will need to accept the minions key
to be able to communicate with each other.	
</p>

<pre class="prettyprint">
<code>
sudo salt-key -A
</code>
</pre>
<p>Accepting the minion's key by typing in Y and now you will be able to execute commands, here are a few that are useful. 
The first one will confirm if you can communicate with your minion.	
</p>

<pre class="prettyprint">
<code>
sudo salt '*' test.ping
</code>
</pre>

<p>You can issue commands directly to the minions, let install Vim.</p>

<pre class="prettyprint">
<code>
sudo salt '*' cmd.run 'sudo yum install vim -y'
</code>
</pre>

<p>How cools is that!  Next post will dicuss setting up your states.</p>

</p>
				</div>
			
				<div>
					<a href="blog/2014/backup_pg_server.html" shape="rect"><h1>Postgres Backup &amp;amp; Recovery</h1></a>
					<p>17 October 2013</p>
					<p><div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel diam purus. Curabitur ut nisi lacus.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://example.org" class="bare">http://example.org</a></p>
</li>
<li>
<p><a href="http://example.org">Example.org</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu,
mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo
ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet
ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus,
id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales. In
consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere
libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.</p>
</div></p>
				</div>
				
				<hr />
			
				<p>Older posts are available in the <a href="archive.html" shape="rect">archive</a>.</p>
			
				
			</div>
			
			
			

			<div class="col-md-3 sidebar">
				<div class="row sidebar-block">
				<p>
				<img class="img-responsive center-block" title="Roman Rafacz" alt="Roman Rafacz" src="" />
				</p>
				<p>Roman is a System Administrator living in Chicago, blah blah bla, adjust</p>
				</div>
				<div class="row sidebar-block">
				<h3>Recent posts</h3>
				</div>
			</div>

		</div> <!-- Row div -->
			
		</div> <!-- container div -->
		
	</div><!-- wrap div -->

	
	<div>
			<div id="push"></div>
    
		    <div id="footer">
		      <div class="container">
		    
		      </div>
		    </div>
	    
		    <!-- Le javascript
		    ================================================== -->
		    <!-- Placed at the end of the document so the pages load faster -->
		    <script xml:space="preserve" src="js/jquery-1.11.1.min.js"></script>
		    <script xml:space="preserve" src="js/bootstrap.min.js"></script>
		    <script xml:space="preserve" src="js/prettify.js"></script>
    		
    	</div>
    </body>
</html>